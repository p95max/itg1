{% extends 'news/base.html' %}
{% load i18n %}

{% block title %}FN - Main {% endblock %}

    {% block content %}
    <section class="news">
        <h3>{{ filter }}</h3>
        {% if request.path == '/news/' %}
                <h1>{% trans '–ü–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏:' %} </h1>
            {% endif %}
        {% if page_obj %}
            <ul>
                {% for item in page_obj %}
                    <li>
                        <a href="{% url 'news:article_detail' slug=item.slug %}">{{ item.title }}</a>
                        {% if item.category %}
                            <span class="category">
                                ({% trans 'üóÇÔ∏è' %}
                                <a href="{% url 'news:news_by_category' item.category.name %}">
                                    {{ item.category.name }}
                                </a>)
                            </span>
                        {% endif %}
                        <br>
                        {% if item.tags.all %}
                            <span class="tags">
                                ({% trans '#Ô∏è‚É£ :' %}
                                {% for tag in item.tags.all %}
                                    <a href="{% url 'news:news_by_tag' tag.name %}">{{ tag.name }}</a>{% if not forloop.last %}, {% endif %}
                                {% endfor %}
                                )
                            </span>
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
            <p>{% trans 'üìä –¢–µ–∫—É—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–∞—Ç–µ–π:' %} {{ articles_count }}</p>
        {% else %}
            <p>{% trans '–ù–µ—Ç –Ω–æ–≤–æ—Å—Ç–µ–π –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.' %} </p>
        {% endif %}

        <div class="pagination">
            <span class="step-links">
                {% if page_obj.has_previous %}
                    <a href="?page=1">{% trans '–ü–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞' %} </a><br>
                    <a href="?page={{ page_obj.previous_page_number }}">< {% trans '–ü—Ä–µ–¥—ã–¥—É—â–∞—è' %} </a>
                {% endif %}

                <span class="current-page">
                    {% trans 'üß≠ –°—Ç—Ä–∞–Ω–∏—Ü–∞' %} {{ page_obj.number }} –∏–∑ {{ page_obj.paginator.num_pages }}
                </span>

                {% if page_obj.has_next %}
                    <a href="?page={{ page_obj.next_page_number }}">{% trans '–°–ª–µ–¥—É—é—â–∞—è'%} > </a>
                {% endif %}
            </span>
        </div>

    {# sorting articles form#}
        <form method="get" class="mb-4">
        <label for="sort">{% trans 'üßÆ –°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ:' %} </label>
        <select name="sort" id="sort" onchange="this.form.submit()">
        <option value="date" {% if sort == "date" %}selected{% endif %}>{% trans 'üîΩ –î–∞—Ç–µ' %} </option>
        <option value="views" {% if sort == "views" %}selected{% endif %}>{% trans 'üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä–∞–º' %} </option>
        <option value="likes" {% if sort == "likes" %}selected{% endif %}>{% trans 'üëç –õ–∞–π–∫–∞–º' %}</option>
        </select>
        </form>

    </section>
    {% endblock %}
