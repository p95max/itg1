{% extends 'news/base.html' %}

{% block title %} О нас {% endblock %}

{% block content %}
    <div class="card p-4">
        <h3>{{ title }}</h3>
        <p>{{ description }}</p>

        <h4>Контактная информация</h4>
        <ul class="list-unstyled">
            <li><strong>Email:</strong> {{ contacts.email }}</li>
            <li><strong>Телефон:</strong> {{ contacts.phone }}</li>
            <li><strong>Адрес:</strong> {{ contacts.address }}</li>
        </ul>

     <div id="map" style="height: 400px;"></div>
    </div>

{% endblock %}

{% block extra_scripts %}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <script defer>
    document.addEventListener("DOMContentLoaded", function () {
        if (typeof L !== "undefined") {
            const map = L.map('map').setView([{{ latitude | safe}}, {{ longitude | safe }}], 13);

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; OpenStreetMap contributors'
            }).addTo(map);

            L.marker([{{ latitude | safe }}, {{ longitude | safe }}]).addTo(map)
                .bindPopup('{{ company_name }}')
                .openPopup();
        } else {
            console.error("Leaflet не загрузился!");
        }
    });
</script>
{% endblock %}
