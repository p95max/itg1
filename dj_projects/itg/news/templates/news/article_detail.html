{% extends 'news/base.html' %}

{% block title %}{{ article.title }}{% endblock %}

{% block content %}
<section class="news">
    <h2>{{ article.title }}</h2>
    <p>{{ article.content }}</p>

{#            Теги#}
    {% if article.tags.all %}
        <p><strong>Теги:</strong></p>
        <ul>
            {% for tag in article.tags.all %}
                <li><a href="{% url 'news:news_by_tag' tag.name %}">{{ tag.name }}</a></li>
            {% endfor %}
        </ul>
    {% endif %}
{#            Категории #}
    <p><strong>Категория:</strong>
    {% if article.category %}
        <a href="{% url 'news:news_by_category' article.category.name %}">{{ article.category.name }}</a>
    {% else %}
        Нет категории
    {% endif %}
    </p>

    {# Лайки и закладки #}
<div class="buttons-container" style="display: flex; gap: 10px;">
    {# Лайки #}
    <form method="POST" action="{% url 'news:toggle_like' article.id %}" class="search-form">
        {% csrf_token %}
        <button type="submit" class="btn btn-primary">
            {% if request.META.REMOTE_ADDR in liked_ips %}
                Убрать "Нравится"
            {% else %}
                Нравиться
            {% endif %}
        </button>
    </form>

    {# Избранное #}
    <form method="POST" action="{% url 'news:toggle_favorite' article.id %}" class="search-form">
        {% csrf_token %}
        <button type="submit" class="btn btn-primary">
            {% if request.META.REMOTE_ADDR in favourite_ips %}
                Убрать с закладок
            {% else %}
                Добавить в закладки
            {% endif %}
        </button>
    </form>
</div>

       <p>Количество просмотров этой статьи: '{{ article.views }}'</p>


    <a class="backlink" href="{% url 'news:catalog' %}">← Назад к главной</a>
</section>
{% endblock %}
