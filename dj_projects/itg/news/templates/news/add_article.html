{% extends 'news/base.html' %}

{% block title %}Добавить статью{% endblock %}

{% block content %}
<h2>Добавить статью</h2>
<form method="post" enctype="multipart/form-data">
    {% csrf_token %}

    {{ form.title.label_tag }}<br>
    {{ form.title }}<br><br>

    {{ form.content.label_tag }}<br>
    {{ form.content }}<br><br>

    {{ form.image.label_tag }}<br>
    {{ form.image }}<br><br>

    <label for="category">Категория</label><br>
    <select name="category">
        <option value="">-- выберите --</option>
        {% for category in all_categories %}
            <option value="{{ category.id }}" {% if category.id == form.category.value %}selected{% endif %}>
                {{ category.name }}
            </option>
        {% endfor %}
    </select><br><br>

    <label class="form-label">Теги</label>
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-4">
            {% for tag in all_tags %}
                <div class="col mb-2">
                    <div class="form-check">
                        <input type="checkbox" name="tags" value="{{ tag.id }}"
                            id="tag-{{ tag.id }}" class="form-check-input"
                            {% if tag in form.cleaned_data.tags.all %}checked{% endif %}>
                        <label class="form-check-label" for="tag-{{ tag.id }}">
                            {{ tag.name }}
                        </label>
                    </div>
                </div>
            {% endfor %}
        </div>

    <br><button type="submit">Опубликовать</button>
</form>

<br>

<h2>Добавить статьи через JSON файл</h2>
<form method="post" enctype="multipart/form-data" action="{% url 'news:add_article' %}">
            {% csrf_token %}
            <div class="form-group mt-4">
                <label class="form-label fw-bold">Ваш .json файл:</label>
                    <input type="file" name="json_file" class="form-control" accept=".json">
            </div>

      <button type="submit" class="btn btn-success mt-2">
        <i class="bi bi-upload">Загрузить</i>
    </button>

</form>
{% endblock %}
